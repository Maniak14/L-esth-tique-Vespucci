<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Admin - L'EsthÃ©tique Vespucci</title>
  <link rel="stylesheet" href="assets/styles-logo.css">
  <style>
    .admin-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem;
      background: var(--bg-dark);
      min-height: 100vh;
    }
    
    .admin-header {
      text-align: center;
      margin-bottom: 3rem;
      padding: 2rem;
      background: var(--surface);
      border-radius: 20px;
      border: 1px solid var(--border);
    }
    
    .admin-header h1 {
      color: var(--text-primary);
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }
    
    .admin-section {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 2rem;
      margin-bottom: 2rem;
    }
    
    .admin-section h2 {
      color: var(--text-primary);
      font-size: 1.8rem;
      margin-bottom: 1.5rem;
      border-bottom: 2px solid var(--primary);
      padding-bottom: 0.5rem;
    }
    
    .image-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-top: 1.5rem;
    }
    
    .image-item {
      position: relative;
      background: var(--bg-dark);
      border: 2px dashed var(--border);
      border-radius: 15px;
      padding: 1rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      min-height: 250px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    
    .image-item:hover {
      border-color: var(--primary);
      transform: translateY(-5px);
    }
    
    .image-item.drag-over {
      border-color: var(--accent);
      background: rgba(32, 178, 170, 0.1);
    }
    
    .image-item img {
      max-width: 100%;
      max-height: 200px;
      border-radius: 10px;
      object-fit: cover;
      margin-bottom: 0.5rem;
    }
    
    .image-item .image-label {
      color: var(--text-secondary);
      font-size: 0.9rem;
      margin-top: 0.5rem;
    }
    
    .image-item .remove-btn {
      position: absolute;
      top: 5px;
      right: 5px;
      background: rgba(255, 0, 0, 0.8);
      color: white;
      border: none;
      border-radius: 50%;
      width: 25px;
      height: 25px;
      cursor: pointer;
      font-size: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .image-item:hover .remove-btn {
      opacity: 1;
    }
    
    .drop-zone {
      border: 2px dashed var(--primary);
      border-radius: 15px;
      padding: 2rem;
      text-align: center;
      color: var(--text-secondary);
      background: rgba(32, 178, 170, 0.05);
      transition: all 0.3s ease;
    }
    
    .drop-zone.drag-over {
      background: rgba(32, 178, 170, 0.2);
      border-color: var(--accent);
    }
    
    .save-btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 1rem 2rem;
      border-radius: 10px;
      font-size: 1.1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 2rem;
      width: 100%;
    }
    
    .save-btn:hover {
      background: var(--primary-light);
      transform: translateY(-2px);
    }
    
    .input-url {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid var(--border);
      border-radius: 10px;
      background: var(--bg-dark);
      color: var(--text-primary);
      margin-top: 0.5rem;
      font-size: 1rem;
    }
    
    .url-input-group {
      margin-bottom: 1rem;
    }
    
    .url-input-group label {
      color: var(--text-primary);
      display: block;
      margin-bottom: 0.5rem;
    }
    
    .btn-small {
      background: var(--primary);
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 0.5rem;
      font-size: 0.9rem;
    }
    
    .btn-small:hover {
      background: var(--primary-light);
    }
    
    .success-message {
      background: rgba(0, 255, 0, 0.2);
      color: #00ff00;
      padding: 1rem;
      border-radius: 10px;
      margin-top: 1rem;
      text-align: center;
      display: none;
    }
    
    .success-message.show {
      display: block;
    }
    
    .add-image-btn {
      background: var(--primary);
      border: 2px dashed var(--primary);
      border-radius: 15px;
      padding: 2rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      min-height: 250px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: var(--text-primary);
      font-size: 3rem;
    }
    
    .add-image-btn:hover {
      background: rgba(150, 100, 200, 0.2);
      border-color: var(--primary-light);
      transform: scale(1.05);
    }
    
    .add-image-btn span {
      font-size: 1rem;
      margin-top: 0.5rem;
      color: var(--text-secondary);
    }
    
    .delete-image-btn {
      position: absolute;
      top: 5px;
      left: 5px;
      background: rgba(255, 0, 0, 0.8);
      color: white;
      border: none;
      border-radius: 50%;
      width: 25px;
      height: 25px;
      cursor: pointer;
      font-size: 1rem;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .image-item:hover .delete-image-btn {
      opacity: 1;
    }
  </style>
</head>
<body>
  <div class="admin-container">
    <div class="admin-header">
      <h1>ðŸ”§ Administration - L'EsthÃ©tique Vespucci</h1>
      <p style="color: var(--text-secondary);">GÃ©rez les images de votre site</p>
    </div>

    <!-- Team Images Section -->
    <div class="admin-section">
      <h2>Photos de l'Ã‰quipe</h2>
      <div class="image-grid" id="teamImages">
        <!-- Team images will be loaded here -->
      </div>
    </div>

    <!-- Gallery Images Section -->
    <div class="admin-section">
      <h2>Galerie (Carousel)</h2>
      <div class="image-grid" id="galleryImages">
        <!-- Gallery images will be loaded here -->
      </div>
      <div class="add-image-btn" onclick="addNewGalleryImage()" title="Ajouter une nouvelle image">
        <div>+</div>
        <span>Ajouter une image</span>
      </div>
    </div>

    <!-- Femmes Catalog Section -->
    <div class="admin-section">
      <h2>Catalogue Femmes</h2>
      <div class="image-grid" id="femmesCatalog">
        <!-- Femmes images will be loaded here -->
      </div>
      <div class="add-image-btn" onclick="addNewFemmesImage()" title="Ajouter une nouvelle image">
        <div>+</div>
        <span>Ajouter une image</span>
      </div>
    </div>

    <!-- Hommes Catalog Section -->
    <div class="admin-section">
      <h2>Catalogue Hommes</h2>
      <div class="image-grid" id="hommesCatalog">
        <!-- Hommes images will be loaded here -->
      </div>
      <div class="add-image-btn" onclick="addNewHommesImage()" title="Ajouter une nouvelle image">
        <div>+</div>
        <span>Ajouter une image</span>
      </div>
    </div>

    <!-- Hero Image Section -->
    <div class="admin-section">
      <h2>Image Hero</h2>
      <div class="image-grid" id="heroImage">
        <!-- Hero image will be loaded here -->
      </div>
    </div>

    <!-- Map Image Section -->
    <div class="admin-section">
      <h2>Carte de Localisation</h2>
      <div class="image-grid" id="mapImage">
        <!-- Map image will be loaded here -->
      </div>
    </div>

    <button class="save-btn" onclick="saveAllImages()">ðŸ’¾ Sauvegarder toutes les modifications</button>
    <div class="success-message" id="successMessage">âœ… Modifications sauvegardÃ©es avec succÃ¨s !</div>
  </div>

  <script>
    // Image configuration
    const imageConfig = {
      team: [
        { id: 'julio', name: 'Julio Alvarez', default: 'https://i.goopics.net/pjtgz1.png' },
        { id: 'soren', name: 'Soren Wanks', default: 'https://i.goopics.net/8y3mgo.png' },
        { id: 'sun', name: 'Sun Price', default: 'https://i.goopics.net/t7adhn.png' },
        { id: 'inaya', name: 'Inaya Kinslow', default: 'https://i.goopics.net/zyg7y5.png' },
        { id: 'andres', name: 'Andres Henarnandez', default: 'https://i.goopics.net/xloucg.png' },
        { id: 'yoruhime', name: 'Yoruhime Yoshikage', default: 'https://i.goopics.net/15utm9.png' }
      ],
      gallery: [
        { id: 'gallery1', name: 'Galerie 1', default: 'img/carousel/1.png' },
        { id: 'gallery2', name: 'Galerie 2', default: 'img/carousel/2.png' },
        { id: 'gallery3', name: 'Galerie 3', default: 'img/carousel/3.png' },
        { id: 'gallery4', name: 'Galerie 4', default: 'img/carousel/4.png' },
        { id: 'gallery5', name: 'Galerie 5', default: 'img/carousel/5.png' },
        { id: 'gallery6', name: 'Galerie 6', default: 'img/carousel/6.png' }
      ],
      hero: { id: 'hero', name: 'Image Hero', default: 'img/hero.png' },
      map: { id: 'map', name: 'Carte', default: 'img/map.png' }
    };

    // Load saved images from localStorage
    function getSavedImage(imageId) {
      return localStorage.getItem(`image_${imageId}`) || null;
    }

    // Save image to localStorage
    function saveImage(imageId, imageUrl) {
      localStorage.setItem(`image_${imageId}`, imageUrl);
    }

    // Get current image URL (saved or default)
    function getCurrentImage(config) {
      // Check if it's a catalog image
      if (config.id.startsWith('femme_')) {
        const femmesImages = JSON.parse(localStorage.getItem('femmes_images') || '[]');
        const image = femmesImages.find(img => img.id === config.id);
        return image ? image.url : config.default;
      } else if (config.id.startsWith('homme_')) {
        const hommesImages = JSON.parse(localStorage.getItem('hommes_images') || '[]');
        const image = hommesImages.find(img => img.id === config.id);
        return image ? image.url : config.default;
      }
      
      const saved = getSavedImage(config.id);
      return saved || config.default;
    }

    // Create image item HTML
    function createImageItem(config, container, isCustom = false) {
      const currentImage = getCurrentImage(config);
      const item = document.createElement('div');
      item.className = 'image-item';
      item.dataset.imageId = config.id;
      item.dataset.isCustom = isCustom;
      
      const isCatalogImage = config.id.startsWith('femme_') || config.id.startsWith('homme_');
      const deleteBtn = (isCustom || isCatalogImage) ? `<button class="delete-image-btn" onclick="${isCatalogImage ? 'deleteCatalogImage' : 'deleteCustomImage'}('${config.id}')" title="Supprimer">Ã—</button>` : '';
      const resetBtn = (!isCustom && !isCatalogImage) ? `<button class="remove-btn" onclick="resetImage('${config.id}')" title="RÃ©initialiser">Ã—</button>` : '';
      
      item.innerHTML = `
        ${deleteBtn}
        <img src="${currentImage}" alt="${config.name}" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Crect fill=%22%23333%22 width=%22200%22 height=%22200%22/%3E%3Ctext fill=%22%23999%22 font-family=%22sans-serif%22 font-size=%2214%22 dy=%2210.5%22 font-weight=%22bold%22 x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22%3EImage%3C/text%3E%3C/svg%3E'">
        <div class="image-label">${config.name}</div>
        ${resetBtn}
        <input type="text" class="input-url" placeholder="URL de l'image" value="${currentImage}" onchange="updateImageUrl('${config.id}', this.value)">
        <button class="btn-small" onclick="updateImageUrl('${config.id}', this.previousElementSibling.value); ${(config.id.startsWith('femme_') || config.id.startsWith('homme_')) ? 'loadFemmesCatalog(); loadHommesCatalog();' : ''}">Mettre Ã  jour</button>
      `;
      
      // Drag and drop
      item.addEventListener('dragover', (e) => {
        e.preventDefault();
        item.classList.add('drag-over');
      });
      
      item.addEventListener('dragleave', () => {
        item.classList.remove('drag-over');
      });
      
      item.addEventListener('drop', (e) => {
        e.preventDefault();
        item.classList.remove('drag-over');
        handleFileDrop(e, config.id);
      });
      
      container.appendChild(item);
    }

    // Handle file drop
    function handleFileDrop(e, imageId) {
      const files = e.dataTransfer.files;
      if (files.length > 0) {
        const file = files[0];
        if (file.type.startsWith('image/')) {
          const reader = new FileReader();
          reader.onload = (event) => {
            const dataUrl = event.target.result;
            updateImageUrl(imageId, dataUrl);
            // Update the input field
            const item = document.querySelector(`[data-image-id="${imageId}"]`);
            if (item) {
              const input = item.querySelector('.input-url');
              if (input) input.value = dataUrl;
            }
          };
          reader.readAsDataURL(file);
        } else {
          alert('Veuillez dÃ©poser une image (JPG, PNG, etc.)');
        }
      }
    }

    // Update image URL
    function updateImageUrl(imageId, url) {
      if (!url) return;
      
      // Check if it's a catalog image (femmes/hommes)
      if (imageId.startsWith('femme_') || imageId.startsWith('homme_')) {
        updateCatalogImageUrl(imageId, url);
        return;
      }
      
      saveImage(imageId, url);
      
      // Update the displayed image
      const item = document.querySelector(`[data-image-id="${imageId}"]`);
      if (item) {
        const img = item.querySelector('img');
        if (img) {
          img.src = url;
        }
      }
    }

    // Reset image to default
    function resetImage(imageId) {
      const config = [...imageConfig.team, ...imageConfig.gallery].find(c => c.id === imageId) || 
                     (imageConfig.hero.id === imageId ? imageConfig.hero : imageConfig.map);
      
      if (config) {
        localStorage.removeItem(`image_${imageId}`);
        updateImageUrl(imageId, config.default);
        const item = document.querySelector(`[data-image-id="${imageId}"]`);
        if (item) {
          const input = item.querySelector('.input-url');
          if (input) input.value = config.default;
        }
      }
    }

    // Add new gallery image
    function addNewGalleryImage() {
      const galleryContainer = document.getElementById('galleryImages');
      const existingImages = galleryContainer.querySelectorAll('.image-item').length;
      const customImages = JSON.parse(localStorage.getItem('custom_gallery_images') || '[]');
      const newId = `gallery_custom_${Date.now()}`;
      
      const newConfig = {
        id: newId,
        name: `Galerie ${existingImages + 1}`,
        default: 'data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Crect fill=%22%23333%22 width=%22200%22 height=%22200%22/%3E%3Ctext fill=%22%23999%22 font-family=%22sans-serif%22 font-size=%2214%22 dy=%2210.5%22 font-weight=%22bold%22 x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22%3ENouvelle%20Image%3C/text%3E%3C/svg%3E'
      };
      
      customImages.push(newId);
      localStorage.setItem('custom_gallery_images', JSON.stringify(customImages));
      
      createImageItem(newConfig, galleryContainer, true);
    }
    
    // Delete custom image
    function deleteCustomImage(imageId) {
      if (confirm('ÃŠtes-vous sÃ»r de vouloir supprimer cette image ?')) {
        // Remove from DOM
        const item = document.querySelector(`[data-image-id="${imageId}"]`);
        if (item) {
          item.remove();
        }
        
        // Remove from localStorage
        localStorage.removeItem(`image_${imageId}`);
        
        // Remove from custom images list
        const customImages = JSON.parse(localStorage.getItem('custom_gallery_images') || '[]');
        const updated = customImages.filter(id => id !== imageId);
        localStorage.setItem('custom_gallery_images', JSON.stringify(updated));
      }
    }
    
    // Add new femmes image
    function addNewFemmesImage() {
      const femmesImages = JSON.parse(localStorage.getItem('femmes_images') || '[]');
      const newId = `femme_${Date.now()}`;
      const newImage = {
        id: newId,
        url: 'data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Crect fill=%22%23333%22 width=%22200%22 height=%22200%22/%3E%3Ctext fill=%22%23999%22 font-family=%22sans-serif%22 font-size=%2214%22 dy=%2210.5%22 font-weight=%22bold%22 x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22%3ENouvelle%20Image%3C/text%3E%3C/svg%3E'
      };
      
      femmesImages.push(newImage);
      localStorage.setItem('femmes_images', JSON.stringify(femmesImages));
      
      loadFemmesCatalog();
    }
    
    // Add new hommes image
    function addNewHommesImage() {
      const hommesImages = JSON.parse(localStorage.getItem('hommes_images') || '[]');
      const newId = `homme_${Date.now()}`;
      const newImage = {
        id: newId,
        url: 'data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Crect fill=%22%23333%22 width=%22200%22 height=%22200%22/%3E%3Ctext fill=%22%23999%22 font-family=%22sans-serif%22 font-size=%2214%22 dy=%2210.5%22 font-weight=%22bold%22 x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22%3ENouvelle%20Image%3C/text%3E%3C/svg%3E'
      };
      
      hommesImages.push(newImage);
      localStorage.setItem('hommes_images', JSON.stringify(hommesImages));
      
      loadHommesCatalog();
    }
    
    // Load femmes catalog in admin
    function loadFemmesCatalog() {
      const container = document.getElementById('femmesCatalog');
      let femmesImages = JSON.parse(localStorage.getItem('femmes_images') || '[]');
      
      if (femmesImages.length === 0) {
        for (let i = 1; i <= 6; i++) {
          femmesImages.push({ id: `femme_${i}`, url: `img/femmes/${i}.png` });
        }
        localStorage.setItem('femmes_images', JSON.stringify(femmesImages));
      }
      
      container.innerHTML = '';
      femmesImages.forEach((item, index) => {
        const config = {
          id: item.id,
          name: `Coupe ${index + 1}`,
          default: item.url
        };
        createImageItem(config, container, true);
      });
    }
    
    // Load hommes catalog in admin
    function loadHommesCatalog() {
      const container = document.getElementById('hommesCatalog');
      let hommesImages = JSON.parse(localStorage.getItem('hommes_images') || '[]');
      
      if (hommesImages.length === 0) {
        for (let i = 1; i <= 6; i++) {
          hommesImages.push({ id: `homme_${i}`, url: `img/hommes/${i}.png` });
        }
        localStorage.setItem('hommes_images', JSON.stringify(hommesImages));
      }
      
      container.innerHTML = '';
      hommesImages.forEach((item, index) => {
        const config = {
          id: item.id,
          name: `Coupe ${index + 1}`,
          default: item.url
        };
        createImageItem(config, container, true);
      });
    }
    
    // Update femmes/hommes image URL
    function updateCatalogImageUrl(imageId, url) {
      if (!url) return;
      
      // Check if it's a femmes image
      if (imageId.startsWith('femme_')) {
        const femmesImages = JSON.parse(localStorage.getItem('femmes_images') || '[]');
        const image = femmesImages.find(img => img.id === imageId);
        if (image) {
          image.url = url;
          localStorage.setItem('femmes_images', JSON.stringify(femmesImages));
        }
      }
      // Check if it's a hommes image
      else if (imageId.startsWith('homme_')) {
        const hommesImages = JSON.parse(localStorage.getItem('hommes_images') || '[]');
        const image = hommesImages.find(img => img.id === imageId);
        if (image) {
          image.url = url;
          localStorage.setItem('hommes_images', JSON.stringify(hommesImages));
        }
      }
      
      // Update the displayed image
      const item = document.querySelector(`[data-image-id="${imageId}"]`);
      if (item) {
        const img = item.querySelector('img');
        if (img) {
          img.src = url;
        }
      }
    }
    
    // Delete femmes/hommes image
    function deleteCatalogImage(imageId) {
      if (confirm('ÃŠtes-vous sÃ»r de vouloir supprimer cette image ?')) {
        // Remove from DOM
        const item = document.querySelector(`[data-image-id="${imageId}"]`);
        if (item) {
          item.remove();
        }
        
        // Remove from localStorage
        if (imageId.startsWith('femme_')) {
          const femmesImages = JSON.parse(localStorage.getItem('femmes_images') || '[]');
          const updated = femmesImages.filter(img => img.id !== imageId);
          localStorage.setItem('femmes_images', JSON.stringify(updated));
          loadFemmesCatalog();
        } else if (imageId.startsWith('homme_')) {
          const hommesImages = JSON.parse(localStorage.getItem('hommes_images') || '[]');
          const updated = hommesImages.filter(img => img.id !== imageId);
          localStorage.setItem('hommes_images', JSON.stringify(updated));
          loadHommesCatalog();
        }
      }
    }
    
    // Save all images
    function saveAllImages() {
      const message = document.getElementById('successMessage');
      message.classList.add('show');
      setTimeout(() => {
        message.classList.remove('show');
      }, 3000);
      
      // Reload the page to show updated images
      setTimeout(() => {
        window.location.reload();
      }, 1000);
    }

    // Initialize admin page
    function initAdmin() {
      // Load team images
      const teamContainer = document.getElementById('teamImages');
      imageConfig.team.forEach(config => {
        createImageItem(config, teamContainer);
      });

      // Load gallery images
      const galleryContainer = document.getElementById('galleryImages');
      imageConfig.gallery.forEach(config => {
        createImageItem(config, galleryContainer);
      });
      
      // Load custom gallery images
      const customImages = JSON.parse(localStorage.getItem('custom_gallery_images') || '[]');
      customImages.forEach(imageId => {
        const saved = localStorage.getItem(`image_${imageId}`);
        if (saved) {
          const name = `Galerie ${galleryContainer.querySelectorAll('.image-item').length + 1}`;
          const config = {
            id: imageId,
            name: name,
            default: saved
          };
          createImageItem(config, galleryContainer, true);
        }
      });

      // Load hero image
      const heroContainer = document.getElementById('heroImage');
      createImageItem(imageConfig.hero, heroContainer);

      // Load map image
      const mapContainer = document.getElementById('mapImage');
      createImageItem(imageConfig.map, mapContainer);
      
      // Load femmes catalog
      loadFemmesCatalog();
      
      // Load hommes catalog
      loadHommesCatalog();
    }

    // Initialize on load
    document.addEventListener('DOMContentLoaded', initAdmin);

    // Prevent default drag behavior on page
    document.addEventListener('dragover', (e) => e.preventDefault());
    document.addEventListener('drop', (e) => e.preventDefault());
  </script>
</body>
</html>

